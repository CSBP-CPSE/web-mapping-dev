<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.0/mapbox-gl.css' rel='stylesheet' />
    <style>
      body {
        margin: 0;
        padding: 0;
      }

      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }
    </style>
</head>
<body>
<div id='map'></div>
<script>

function GetUrlParameter(name) {				
	name = name.replace(/[\[\]]/g, '\\$&');
	
	var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
	
	results = regex.exec(window.location.href);
	
	if (!results) return null;
	
	if (!results[2]) return '';
	
	return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

var map = GetUrlParameter("map");

if (map == null) map = "odb";

mapboxgl.accessToken = 'pk.eyJ1Ijoic3RhdWJpYnIiLCJhIjoiY2p5aHJuZHRnMDJwdzNucDBkc3NoNmR2OCJ9.Dq-q5yKwOpULPIRJMhqnow';

if (map == "odb") {
	var map = new mapboxgl.Map({
	  container: 'map', // container id
	  style: 'mapbox://styles/staubibr/cjz1cmtys0yee1cpdmnftk2f0', // stylesheet location
	  center: [-75.6972, 45.4215], // starting position
	  zoom: 11 // starting zoom
	});

	map.on('load', function(ev) {
		var classes = [
		  'case',
		  ['<', ['get', 'Shape_Area'], 1000],
		  '#639AFE',
		  ['<', ['get', 'Shape_Area'], 3000],
		  '#967CE3',
		  ['<', ['get', 'Shape_Area'], 5000],
		  '#B759BB',
		  ['<', ['get', 'Shape_Area'], 10000],
		  '#C63388',
		  ['<', ['get', 'Shape_Area'], 20000],
		  '#C20652',
		  '#AD001B'
		];

		map.setPaintProperty('odb-ontario-4326', 'fill-color', classes);
	})
}
else if (map == "campus") {
	var map = new mapboxgl.Map({
	  container: 'map', // container id
	  style: 'mapbox://styles/staubibr/cjz1pb1g76swj1coy6ec94cx7', // stylesheet location
	  center: [-75.69596, 45.3858], // starting position
	  zoom: 15 // starting zoom
	});
}

var nav = new mapboxgl.NavigationControl();

map.addControl(nav, 'top-left');
	
map.addControl(new mapboxgl.GeolocateControl({
	positionOptions: { enableHighAccuracy: true },
	trackUserLocation: true
}));

// map.addControl(new mapboxgl.AttributionControl({ compact: true }));

var scale = new mapboxgl.ScaleControl({
	maxWidth: 80,
	unit: 'imperial'
});

map.addControl(scale);

scale.setUnit('metric');

</script>
</body>
</html>